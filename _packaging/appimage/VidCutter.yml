app: VidCutter
union: true

ingredients:
  dist: trusty
  sources: 
    - deb http://archive.ubuntu.com/ubuntu/ trusty main universe
    - deb http://ppa.launchpad.net/ozmartian/apps/ubuntu xenial main
  ppas:
    - mc3man/testing6
    - ubuntu-toolchain-r/test
    - fkrull/deadsnakes
  packages:
    - gcc-7-base
    - python3.5
    - libstdc++6
    - libgcc1
    - libisl15
    - libmpv-dev
    - ffmpeg
    - mediainfo
  script:
    - pip3.5 install PyQt5

script:
  - cat > usr/bin/vidcutter <<\EOF
  - #!/usr/bin/python3.5
  - import sys
  - from pkg_resources import load_entry_point
  - from signal import SIGINT, SIG_DFL, SIGTERM, signal
  - signal(SIGINT, SIG_DFL)
  - signal(SIGTERM, SIG_DFL)
  - sys.path.insert(0, "/usr/lib/python3/dist-packages/")
  - sys.exit(load_entry_point('vidcutter', 'gui_scripts', 'vidcutter')())
  - EOF
  - cp usr/share/icons/hicolor/256x256/apps/vidcutter.png .
  - ln -s vidcutter.png .DirIcon
  - cp usr/share/applications/com.ozmartians.VidCutter.desktop ./vidcutter.desktop
  - mv usr/lib/x86_64-linux-gnu/caca/*.so* usr/lib/x86_64-linux-gnu/
