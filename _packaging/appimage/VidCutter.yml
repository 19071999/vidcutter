app: VidCutter

ingredients:
  dist: trusty
  sources: 
    - deb http://mirrors.cn99.com/ubuntu trusty main universe
    - deb http://mirrors.cn99.com/ubuntu xenial main universe
    - deb http://ppa.launchpad.net/ozmartian/apps/ubuntu xenial main
  ppas:
    - mc3man/testing6
    - ubuntu-toolchain-r/test
    - fkrull/deadsnakes
  packages:
    - gcc-7-base
    - python3.5
    - libstdc++6
    - libgcc1
    - libisl15
    # - libmpv-dev
    # - ffmpeg
    # - mediainfo

script:
  - cp usr/share/icons/hicolor/256x256/apps/vidcutter.png .
  - ln -s vidcutter.png .DirIcon
  - cp -f usr/share/applications/*id*utter.desktop ./vidcutter.desktop
  - sed -i -e 's/Exec=vidcutter/Exec=vidcutter.wrapper/g' ./vidcutter.desktop
  - cp -f ../../scripts/* usr/bin/
  - rm -f ./AppRun
  - gcc -fPIC -o ./AppRun ../../AppRun.c
  - strip ./AppRun
  - chmod +x ./AppRun
  - rm -f usr/bin/python3 usr/bin/python3.5
  - ln -s usr/bin/python3.5m usr/bin/python3
  - ln -s usr/bin/python3.5m usr/bin/python3.5
  - mv usr/lib/x86_64-linux-gnu/caca/*.so* usr/lib/x86_64-linux-gnu/
